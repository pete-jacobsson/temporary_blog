"0","library(tidyverse)"
"0","library(broom)"
"0",""
"0","### Set-up for fifty bins"
"0","singles_data_url <- ""https://raw.githubusercontent.com/pete-jacobsson/14C-power-sensitivity/main/simulation_results/singles_011_results.csv"" "
"0","single_cals <- read_csv(url(singles_data_url))"
"2","[1mRows: [22m[34m10000[39m [1mColumns: [22m[34m10[39m"
"2","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[32mdbl[39m (10): target_year, offset_14c_age, measurement_error, offset_magnitude, accuracy_68..."
"2","
[36mâ„¹[39m Use `spec()` to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set `show_col_types = FALSE` to quiet this message."
"0","###Seperate pos from neg offsets and group things by cal curve "
"0","single_cals_modelled <- single_cals %>%"
"0","  mutate ("
"0","    offset_pos = if_else(offset_magnitude > 0, TRUE, FALSE),"
"0","    offset_magnitude = if_else(offset_pos, "
"0","                               offset_magnitude, offset_magnitude * -1),"
"0","    # Changing negs on offset magnitude to have a consistent direction at downstream visualization."
"0","    binned_targets = ntile(target_year, 50)"
"0","  ) %>%"
"0","  select(-target_year)"
"0",""
"0","### ntile() wouldn't return the relevant target years, so it needs to be done as its own thing."
"0","single_cals_modelled <- single_cals %>%"
"0","  mutate(binned_targets = ntile(target_year, 50)) %>%"
"0","  group_by(binned_targets) %>%"
"0","  summarize( #Easy way to get years for the indiv bins, without too muchj headach"
"0","    target_year = min(target_year)"
"0","    ) %>%"
"0","  inner_join(single_cals_modelled) %>% #Join the binned DF back in. No, I don't like this either!"
"0","  group_by(offset_pos, target_year) %>%"
"0","  nest()"
"2","Joining with `by = join_by(binned_targets)`"
